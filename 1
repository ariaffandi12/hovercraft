-- Script GUI + Fitur Tab Main dengan Submenu (Roblox Lua)
-- Tempatkan ini di LocalScript dalam StarterGui

--===[ GUI SETUP ]===--
local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "HovercraftGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Frame utama
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 300)
mainFrame.Position = UDim2.new(0.3, 0, 0.3, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- Judul
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.Text = "[Hovercraft] War Tycoon"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 20
title.Parent = mainFrame

-- Tombol Minimize (jadi ikon)
local minimize = Instance.new("TextButton")
minimize.Size = UDim2.new(0, 25, 0, 25)
minimize.Position = UDim2.new(1, -55, 0, 5)
minimize.Text = "-"
minimize.TextSize = 18
minimize.Font = Enum.Font.SourceSansBold
minimize.TextColor3 = Color3.new(1,1,1)
minimize.BackgroundColor3 = Color3.fromRGB(50,50,50)
minimize.Parent = mainFrame

-- Tombol Exit
local exit = Instance.new("TextButton")
exit.Size = UDim2.new(0, 25, 0, 25)
exit.Position = UDim2.new(1, -25, 0, 5)
exit.Text = "x"
exit.TextSize = 18
exit.Font = Enum.Font.SourceSansBold
exit.TextColor3 = Color3.new(1,0.3,0.3)
exit.BackgroundColor3 = Color3.fromRGB(50,50,50)
exit.Parent = mainFrame

-- Tombol Tab: Main
local tabMain = Instance.new("TextButton")
tabMain.Size = UDim2.new(0, 80, 0, 30)
tabMain.Position = UDim2.new(0, 0, 0, 35)
tabMain.Text = "Main"
tabMain.Font = Enum.Font.SourceSans
tabMain.TextSize = 16
tabMain.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
tabMain.TextColor3 = Color3.new(1, 1, 1)
tabMain.Parent = mainFrame

-- Tombol Tab: Info
local tabInfo = Instance.new("TextButton")
tabInfo.Size = UDim2.new(0, 80, 0, 30)
tabInfo.Position = UDim2.new(0, 0, 0, 70)
tabInfo.Text = "Info"
tabInfo.Font = Enum.Font.SourceSans
tabInfo.TextSize = 16
tabInfo.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
tabInfo.TextColor3 = Color3.new(1, 1, 1)
tabInfo.Parent = mainFrame

-- Kontainer konten
local contentFrame = Instance.new("Frame")
contentFrame.Position = UDim2.new(0, 90, 0, 35)
contentFrame.Size = UDim2.new(1, -90, 1, -40)
contentFrame.BackgroundTransparency = 1
contentFrame.Name = "ContentFrame"
contentFrame.Parent = mainFrame

-- Konten: MAIN
local getAllBtn = Instance.new("TextButton")
getAllBtn.Size = UDim2.new(1, -20, 0, 30)
getAllBtn.Position = UDim2.new(0, 10, 0, 10)
getAllBtn.Text = "Get All Buildings"
getAllBtn.BackgroundColor3 = Color3.fromRGB(40, 100, 40)
getAllBtn.TextColor3 = Color3.new(1, 1, 1)
getAllBtn.Font = Enum.Font.SourceSansSemibold
getAllBtn.TextSize = 16
getAllBtn.Parent = contentFrame

local espBtn = Instance.new("TextButton")
espBtn.Size = UDim2.new(1, -20, 0, 30)
espBtn.Position = UDim2.new(0, 10, 0, 50)
espBtn.Text = "ESP Mode"
espBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 40)
espBtn.TextColor3 = Color3.new(1, 1, 1)
espBtn.Font = Enum.Font.SourceSansSemibold
espBtn.TextSize = 16
espBtn.Parent = contentFrame

local moneyBtn = Instance.new("TextButton")
moneyBtn.Size = UDim2.new(1, -20, 0, 30)
moneyBtn.Position = UDim2.new(0, 10, 0, 90)
moneyBtn.Text = "Free Money"
moneyBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 120)
moneyBtn.TextColor3 = Color3.new(1, 1, 1)
moneyBtn.Font = Enum.Font.SourceSansSemibold
moneyBtn.TextSize = 16
moneyBtn.Parent = contentFrame

local spawnBtn = Instance.new("TextButton")
spawnBtn.Size = UDim2.new(1, -20, 0, 30)
spawnBtn.Position = UDim2.new(0, 10, 0, 130)
spawnBtn.Text = "Spawn Vehicle"
spawnBtn.BackgroundColor3 = Color3.fromRGB(80, 40, 120)
spawnBtn.TextColor3 = Color3.new(1, 1, 1)
spawnBtn.Font = Enum.Font.SourceSansSemibold
spawnBtn.TextSize = 16
spawnBtn.Parent = contentFrame

-- Tombol ikon muncul saat minimize
local iconBtn = Instance.new("TextButton")
iconBtn.Size = UDim2.new(0, 100, 0, 30)
iconBtn.Position = UDim2.new(0, 10, 0, 10)
iconBtn.Text = "âš™ Hover UI"
iconBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
iconBtn.TextColor3 = Color3.new(1, 1, 1)
iconBtn.Visible = false
iconBtn.Draggable = true
iconBtn.Active = true
iconBtn.Parent = screenGui

--===[ FUNGSI ]===--
local function showTab(tabName)
    local visible = (tabName == "Main")
    getAllBtn.Visible = visible
    espBtn.Visible = visible
    moneyBtn.Visible = visible
    spawnBtn.Visible = visible
end

-- Logika tombol
minimize.MouseButton1Click:Connect(function()
    mainFrame.Visible = false
    iconBtn.Visible = true
end)

iconBtn.MouseButton1Click:Connect(function()
    mainFrame.Visible = true
    iconBtn.Visible = false
end)

exit.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

tabMain.MouseButton1Click:Connect(function()
    showTab("Main")
end)

tabInfo.MouseButton1Click:Connect(function()
    game.StarterGui:SetCore("SendNotification", {
        Title = "Info Developer";
        Text = "Game by @Riee | Hovercraft War Tycoon";
        Duration = 5;
    })
end)

-- Fungsi Get All Buildings
local function getAllBuildings()
    local tycoons = workspace:FindFirstChild("Tycoons")
    if not tycoons then return end

    for _, tycoon in pairs(tycoons:GetChildren()) do
        if tycoon:FindFirstChild("Owner") and tycoon.Owner.Value == player then
            for _, obj in pairs(tycoon:GetDescendants()) do
                if obj:IsA("ClickDetector") then
                    fireclickdetector(obj)
                end
            end
        end
    end
end

-- Fungsi ESP sederhana (nama pemain di atas kepala)
local function enableESP()
    for _, plr in pairs(game.Players:GetPlayers()) do
        if plr ~= player and plr.Character and plr.Character:FindFirstChild("Head") then
            if not plr.Character.Head:FindFirstChild("ESP") then
                local billboard = Instance.new("BillboardGui")
                billboard.Name = "ESP"
                billboard.Size = UDim2.new(0, 100, 0, 20)
                billboard.StudsOffset = Vector3.new(0, 2, 0)
                billboard.Adornee = plr.Character.Head
                billboard.AlwaysOnTop = true
                billboard.Parent = plr.Character.Head

                local nameLabel = Instance.new("TextLabel")
                nameLabel.Size = UDim2.new(1, 0, 1, 0)
                nameLabel.BackgroundTransparency = 1
                nameLabel.Text = plr.Name
                nameLabel.TextColor3 = Color3.new(1, 0, 0)
                nameLabel.TextScaled = true
                nameLabel.Font = Enum.Font.SourceSansBold
                nameLabel.Parent = billboard
            end
        end
    end
end

-- Fungsi Free Money
local function giveMoney()
    local remote = workspace:FindFirstChild("RemoteEvent") or game.ReplicatedStorage:FindFirstChild("RemoteEvent")
    if remote then
        remote:FireServer("Money", 100000)
    end
end

-- Fungsi Spawn Vehicle
local function spawnVehicle()
    local vehicleModel = game.ReplicatedStorage:FindFirstChild("Jeep")
    if vehicleModel then
        local newVehicle = vehicleModel:Clone()
        newVehicle.Parent = workspace
        newVehicle:SetPrimaryPartCFrame(player.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, -15))
    end
end

-- Koneksi tombol
getAllBtn.MouseButton1Click:Connect(getAllBuildings)
espBtn.MouseButton1Click:Connect(enableESP)
moneyBtn.MouseButton1Click:Connect(giveMoney)
spawnBtn.MouseButton1Click:Connect(spawnVehicle)

-- Tampilkan tab awal
showTab("Main")
